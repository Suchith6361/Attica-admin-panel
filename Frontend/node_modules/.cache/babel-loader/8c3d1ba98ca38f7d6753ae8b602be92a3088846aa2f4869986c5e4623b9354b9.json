{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useParams}from\"react-router-dom\";import{BASE_URL}from'./constants';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Complaints=()=>{const{employeeId,name,mobileNumber}=useParams();const[employee,setEmployee]=useState({});const[complaints,setComplaints]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchData=async()=>{setLoading(true);try{const employeeResponse=await axios.get(`${BASE_URL}/employees/${employeeId}/attendance-list`);setEmployee(employeeResponse.data);const complaintsResponse=await axios.get(`${BASE_URL}/employees/${employeeId}/attendance-list/complaints`);setComplaints(complaintsResponse.data);}catch(err){setError(\"Error fetching data. Please try again later.\");console.error(\"Error fetching data:\",err);}finally{setLoading(false);}};fetchData();},[employeeId]);// Sort complaints by createdAt date in descending order\nconst sortedComplaints=complaints.sort((a,b)=>new Date(b.createdAt)-new Date(a.createdAt));return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 bg-gradient-to-b from-gray-50 to-gray-100 min-h-screen absolute top-20 right-0 left-[275px]\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-r from-green-500 to-blue-500 p-4 rounded-lg shadow-lg mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-bold text-white\",children:\"Employee Information\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg text-white\",children:[\"ID: \",employee.employeeId||employeeId]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg text-white\",children:[\"Name: \",employee.name||name]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-lg text-white\",children:[\"Number: \",employee.mobileNumber||mobileNumber]})]}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold mb-4 text-black text-center\",children:\"Complaints Inbox\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:loading?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"Loading complaints...\"}):error?/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-red-500\",children:error}):sortedComplaints.length>0?sortedComplaints.map((complaint,index)=>{// Extract date and time from createdAt\nconst date=new Date(complaint.createdAt);const formattedDate=date.toLocaleDateString();// Only the date\nconst formattedTime=date.toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'});// Only the time\nreturn/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 rounded-lg shadow-lg border-l-4 border-purple-500 transition duration-300 ease-in-out hover:scale-105 hover:bg-gradient-to-r from-yellow-300 via-red-200 to-pink-300 relative\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold\",children:\"Title:\"}),\" \",/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-bold mb-2\",children:complaint.title}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xl font-semibold\",children:\"Description:\"}),\" \",/*#__PURE__*/_jsx(\"p\",{className:\"text-black text-lg\",children:complaint.description}),/*#__PURE__*/_jsxs(\"p\",{className:\"absolute right-4 top-4 text-gray-600\",children:[formattedDate,\" \",formattedTime]})]},index);}):/*#__PURE__*/_jsx(\"p\",{className:\"text-center text-gray-500\",children:\"No complaints found.\"})})]});};export default Complaints;","map":{"version":3,"names":["React","useEffect","useState","axios","useParams","BASE_URL","jsx","_jsx","jsxs","_jsxs","Complaints","employeeId","name","mobileNumber","employee","setEmployee","complaints","setComplaints","loading","setLoading","error","setError","fetchData","employeeResponse","get","data","complaintsResponse","err","console","sortedComplaints","sort","a","b","Date","createdAt","className","children","length","map","complaint","index","date","formattedDate","toLocaleDateString","formattedTime","toLocaleTimeString","hour","minute","title","description"],"sources":["C:/Users/SUCHITH/OneDrive/Desktop/admin_panel new/admin_panel/Frontend/src/components/Complaints.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport axios from \"axios\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { BASE_URL } from './constants'\r\n\r\nconst Complaints = () => {\r\n  const { employeeId, name, mobileNumber } = useParams();\r\n  const [employee, setEmployee] = useState({});\r\n  const [complaints, setComplaints] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      setLoading(true);\r\n      try {\r\n        const employeeResponse = await axios.get(\r\n          `${BASE_URL}/employees/${employeeId}/attendance-list`\r\n        );\r\n        setEmployee(employeeResponse.data);\r\n\r\n        const complaintsResponse = await axios.get(\r\n          `${BASE_URL}/employees/${employeeId}/attendance-list/complaints`\r\n        );\r\n        setComplaints(complaintsResponse.data);\r\n      } catch (err) {\r\n        setError(\"Error fetching data. Please try again later.\");\r\n        console.error(\"Error fetching data:\", err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [employeeId]);\r\n\r\n  // Sort complaints by createdAt date in descending order\r\n  const sortedComplaints = complaints.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));\r\n\r\n  return (\r\n    <div className=\"p-6 bg-gradient-to-b from-gray-50 to-gray-100 min-h-screen absolute top-20 right-0 left-[275px]\">\r\n      {/* Employee Information */}\r\n      <div className=\"bg-gradient-to-r from-green-500 to-blue-500 p-4 rounded-lg shadow-lg mb-6\">\r\n        <h2 className=\"text-2xl font-bold text-white\">Employee Information</h2>\r\n        <p className=\"text-lg text-white\">ID: {employee.employeeId || employeeId}</p>\r\n        <p className=\"text-lg text-white\">Name: {employee.name || name}</p>\r\n        <p className=\"text-lg text-white\">Number: {employee.mobileNumber || mobileNumber}</p>\r\n      </div>\r\n\r\n      {/* Complaints List */}\r\n      <h2 className=\"text-3xl font-bold mb-4 text-black text-center\">Complaints Inbox</h2>\r\n      <div className=\"space-y-4\">\r\n        {loading ? (\r\n          <p className=\"text-center text-gray-500\">Loading complaints...</p>\r\n        ) : error ? (\r\n          <p className=\"text-center text-red-500\">{error}</p>\r\n        ) : sortedComplaints.length > 0 ? (\r\n          sortedComplaints.map((complaint, index) => {\r\n            // Extract date and time from createdAt\r\n            const date = new Date(complaint.createdAt);\r\n            const formattedDate = date.toLocaleDateString(); // Only the date\r\n            const formattedTime = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }); // Only the time\r\n\r\n            return (\r\n              <div\r\n                key={index}\r\n                className=\"bg-white p-4 rounded-lg shadow-lg border-l-4 border-purple-500 transition duration-300 ease-in-out hover:scale-105 hover:bg-gradient-to-r from-yellow-300 via-red-200 to-pink-300 relative\"\r\n              >\r\n                <span className=\"text-xl font-semibold\">Title:</span>{\" \"}\r\n                <h3 className=\"text-xl font-bold mb-2\">{complaint.title}</h3>\r\n                <span className=\"text-xl font-semibold\">Description:</span>{\" \"}\r\n                <p className=\"text-black text-lg\">{complaint.description}</p>\r\n                \r\n                {/* Display Date at the Top Right */}\r\n                <p className=\"absolute right-4 top-4 text-gray-600\">\r\n                  {formattedDate} {formattedTime}\r\n                </p>\r\n              </div>\r\n            );\r\n          })\r\n        ) : (\r\n          <p className=\"text-center text-gray-500\">No complaints found.</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Complaints;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}