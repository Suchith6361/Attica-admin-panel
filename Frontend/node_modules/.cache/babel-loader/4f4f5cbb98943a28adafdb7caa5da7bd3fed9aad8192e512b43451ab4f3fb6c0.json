{"ast":null,"code":"import{useState,useEffect}from\"react\";import{Navigate,useNavigate}from\"react-router-dom\";import{BASE_URL}from'./constants';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const AuthPage=()=>{const[isLogin,setIsLogin]=useState(true);// Toggle between login and register\nconst[username,setUsername]=useState(\"\");// Username for login/register\nconst[password,setPassword]=useState(\"\");// Password for login/register\nconst navigate=useNavigate();const[error,setError]=useState(\"\");useEffect(()=>{const auth=localStorage.getItem(\"user\");if(auth){navigate(\"/\");}});// Handle Login function\nconst handleLogin=async()=>{console.log(username,password);try{let result=await fetch(`${BASE_URL}/login`,{method:\"post\",body:JSON.stringify({username,password}),headers:{\"Content-Type\":\"application/json\"}});if(result){result=await result.json();console.log(result);localStorage.setItem(\"user\",JSON.stringify(result));Navigate(\"/\");}else{alert(\"Please enter correct Details\");}// Navigate to dashboard or home page\n}catch(error){setError(\"Invalid Username or Password\");}};// Handle Register function\nconst handleRegister=async()=>{console.log(username,password);try{let result=await fetch(`${BASE_URL}/register`,{method:\"post\",body:JSON.stringify({username,password}),headers:{\"Content-Type\":\"application/json\"}});result=await result.json();if(result.error){setError(result.error);// Display error if the user already exists\n}else{console.log(result);localStorage.setItem(\"adminuser\",JSON.stringify(result));// Registration success, navigate or display success message\n}}catch(error){setError(\"Registration failed. Please try again.\");}};return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen bg-gray-100\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-[400px] p-8 bg-white rounded-lg shadow-lg\",children:isLogin?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-center mb-4\",children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Username\",className:\"w-full p-2 mb-4 border rounded\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter Password\",className:\"w-full p-2 mb-4 border rounded\",value:password,onChange:e=>setPassword(e.target.value)}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-2\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full hover:bg-blue-400 bg-blue-500 text-white py-2 rounded\",onClick:handleLogin,children:\"Login\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-4\",children:[\"Don't have an account?\",\" \",/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-500 underline\",onClick:()=>setIsLogin(false),children:\"Register here\"})]})]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold text-center mb-4\",children:\"Register\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Username\",className:\"w-full p-2 mb-4 border rounded\",value:username,onChange:e=>setUsername(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter Password\",className:\"w-full p-2 mb-4 border rounded\",value:password,onChange:e=>setPassword(e.target.value)}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"text-red-500 text-sm mb-2\",children:error}),/*#__PURE__*/_jsx(\"button\",{className:\"w-full hover:bg-blue-400 bg-blue-500 text-white py-2 rounded\",onClick:handleRegister,children:\"Register\"}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-center mt-4\",children:[\"Already have an account?\",\" \",/*#__PURE__*/_jsx(\"button\",{className:\"text-blue-500 underline\",onClick:()=>setIsLogin(true),children:\"Login here\"})]})]})})});};export default AuthPage;","map":{"version":3,"names":["useState","useEffect","Navigate","useNavigate","BASE_URL","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","AuthPage","isLogin","setIsLogin","username","setUsername","password","setPassword","navigate","error","setError","auth","localStorage","getItem","handleLogin","console","log","result","fetch","method","body","JSON","stringify","headers","json","setItem","alert","handleRegister","className","children","type","placeholder","value","onChange","e","target","onClick"],"sources":["C:/Users/SUCHITH/OneDrive/Desktop/admin_panel new/admin_panel/Frontend/src/components/Register.jsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\r\nimport { Navigate, useNavigate } from \"react-router-dom\";\r\nimport { BASE_URL } from './constants'\r\n\r\nconst AuthPage = () => {\r\n  const [isLogin, setIsLogin] = useState(true); // Toggle between login and register\r\n  const [username, setUsername] = useState(\"\"); // Username for login/register\r\n  const [password, setPassword] = useState(\"\"); // Password for login/register\r\n  const navigate = useNavigate();\r\n  const [error, setError] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    const auth = localStorage.getItem(\"user\");\r\n    if (auth) {\r\n      navigate(\"/\");\r\n    }\r\n  });\r\n\r\n  // Handle Login function\r\n  const handleLogin = async () => {\r\n    console.log(username, password);\r\n    try {\r\n      let result = await fetch(`${BASE_URL}/login`, {\r\n        method: \"post\",\r\n        body: JSON.stringify({ username, password }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n      if (result) {\r\n        result = await result.json();\r\n        console.log(result);\r\n        localStorage.setItem(\"user\", JSON.stringify(result));\r\n        Navigate(\"/\");\r\n      } else {\r\n        alert(\"Please enter correct Details\");\r\n      }\r\n      // Navigate to dashboard or home page\r\n    } catch (error) {\r\n      setError(\"Invalid Username or Password\");\r\n    }\r\n  };\r\n\r\n  // Handle Register function\r\n  const handleRegister = async () => {\r\n    console.log(username, password);\r\n    try {\r\n      let result = await fetch(`${BASE_URL}/register`, {\r\n        method: \"post\",\r\n        body: JSON.stringify({ username, password }),\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n      });\r\n\r\n      result = await result.json();\r\n\r\n      if (result.error) {\r\n        setError(result.error); // Display error if the user already exists\r\n      } else {\r\n        console.log(result);\r\n        localStorage.setItem(\"adminuser\", JSON.stringify(result));\r\n        // Registration success, navigate or display success message\r\n      }\r\n    } catch (error) {\r\n      setError(\"Registration failed. Please try again.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex justify-center items-center h-screen bg-gray-100\">\r\n      <div className=\"w-[400px] p-8 bg-white rounded-lg shadow-lg\">\r\n        {/* Conditionally render Login or Register form */}\r\n        {isLogin ? (\r\n          <>\r\n            {/* Login Form */}\r\n            <h2 className=\"text-2xl font-semibold text-center mb-4\">Login</h2>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter Username\"\r\n              className=\"w-full p-2 mb-4 border rounded\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Enter Password\"\r\n              className=\"w-full p-2 mb-4 border rounded\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            {error && <p className=\"text-red-500 text-sm mb-2\">{error}</p>}\r\n            <button\r\n              className=\"w-full hover:bg-blue-400 bg-blue-500 text-white py-2 rounded\"\r\n              onClick={handleLogin}\r\n            >\r\n              Login\r\n            </button>\r\n            <p className=\"text-center mt-4\">\r\n              Don't have an account?{\" \"}\r\n              <button\r\n                className=\"text-blue-500 underline\"\r\n                onClick={() => setIsLogin(false)}\r\n              >\r\n                Register here\r\n              </button>\r\n            </p>\r\n          </>\r\n        ) : (\r\n          <>\r\n            {/* Register Form */}\r\n            <h2 className=\"text-2xl font-semibold text-center mb-4\">\r\n              Register\r\n            </h2>\r\n            <input\r\n              type=\"text\"\r\n              placeholder=\"Enter Username\"\r\n              className=\"w-full p-2 mb-4 border rounded\"\r\n              value={username}\r\n              onChange={(e) => setUsername(e.target.value)}\r\n            />\r\n\r\n            <input\r\n              type=\"password\"\r\n              placeholder=\"Enter Password\"\r\n              className=\"w-full p-2 mb-4 border rounded\"\r\n              value={password}\r\n              onChange={(e) => setPassword(e.target.value)}\r\n            />\r\n            {error && <p className=\"text-red-500 text-sm mb-2\">{error}</p>}\r\n            <button\r\n              className=\"w-full hover:bg-blue-400 bg-blue-500 text-white py-2 rounded\"\r\n              onClick={handleRegister}\r\n            >\r\n              Register\r\n            </button>\r\n            <p className=\"text-center mt-4\">\r\n              Already have an account?{\" \"}\r\n              <button\r\n                className=\"text-blue-500 underline\"\r\n                onClick={() => setIsLogin(true)}\r\n              >\r\n                Login here\r\n              </button>\r\n            </p>\r\n          </>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AuthPage;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}